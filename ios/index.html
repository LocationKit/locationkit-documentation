<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LocationKit iOS Docs</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["objective_c","swift"]);
        });
      </script>
    <!-- Typekit -->
        <script src="//use.typekit.net/rcz1dag.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>
    <!-- END Typekit -->
  </head>

  <body class="index">

      <div class="header-bar">
          <div class="pure-g">
              <div class="pure-u-4-5">
                  <div class="pure-menu pure-menu-horizontal">
                      <a href="https://locationkit.io" class="pure-menu-heading pure-menu-link"><img src='https://cdn.socialradar.com/images/locationkit-logoonly.png' height=64 /></a>
                      <ul class="pure-menu-list">
                          <li class="pure-menu-item">
                              <h2><a href="https://dashboard.locationkit.io" class="pure-menu-link">Dashboard</a></h2>
                          </li>
                          <li class="pure-menu-item">
                              <h2><a href="https://community.locationkit.io" class="pure-menu-link">Community</a></h2>
                          </li>
                          <li class="pure-menu-item">
                              <h2><a href="https://docs.locationkit.io" class="pure-menu-link">Documentation</a></h2>
                          </li>
                          <li class="pure-menu-item">
                              <h2><a href="https://locationkit.io/developer/faqs/" class="pure-menu-link">FAQs</a></h2>
                          </li>
                          <li class="pure-menu-item">
                              <h2><a href="https://locationkit.io/pricing/" class="pure-menu-link">Pricing</a></h2>
                          </li>
                      </ul>
                  </div>
              </div>
              <div class="pure-u-1-5">
                  <div class="pure-menu pure-menu-horizontal menu-right-buttons">
                      <ul class="pure-menu-list">
                          <li class="pure-menu-item sign-up">
                              <a href="https://dashboard.locationkit.io/#/sign-up" class="pure-menu-link">Sign up free</a>
                          </li>
                          <li class="pure-menu-item sign-in">
                              <a href="https://dashboard.locationkit.io/#/sign-in" class="pure-menu-link">Sign in</a>
                          </li>
                      </ul>
                  </div>
              </div>
          </div>
      </div>
    <div class="content-wrapper">
        <a href="#" id="nav-button">
            <span>
                NAV
                <img src="images/navbar.png" />
            </span>
        </a>
        <div class="tocify-wrapper">
                <div class="lang-selector">
                            <a href="#" data-language-name="objective_c">Objective-C</a>
                            <a href="#" data-language-name="swift">Swift</a>
                </div>
                <div class="search">
                    <input type="text" class="search" id="input-search" placeholder="Search">
                </div>
                <ul class="search-results"></ul>
            <div id="toc">
            </div>
                <ul class="toc-footer">
                        <li><a href='https://locationkit.io'>Website</a></li>
                        <li><a href='https://dashboard.locationkit.io'>Dashboard</a></li>
                        <li><a href='https://community.locationkit.io'>Community</a></li>
                        <li><a href='https://docs.locationkit.io'>Documentation</a></li>
                        <li><a href='https://locationkit.io/developer/faqs'>FAQs</a></li>
                        <li><a href='https://locationkit.io/pricing'>Pricing</a></li>
                </ul>
        </div>
        <div class="page-wrapper">
            <div class="dark-box"></div>
            <div class="content">
                <h1 id="overview">Overview</h1>

<p><a href="https://locationkit.io"><img alt="LocationKit" src="images/locationkit-textonly.png" /></a></p>

<p>SocialRadar&rsquo;s <a href="https://locationkit.io">LocationKit</a> SDK for iOS provides
advanced location technology to offer developers higher accuracy location, lower
battery drain, automatic venue recognition and detailed location analytics.</p>

<p>LocationKit enables you to add enhanced location capabilities, and therefore
personalized experiences, to your mobile applications without the need for
location expertise.</p>

<h3 id="how-it-works">How it works</h3>

<p>LocationKit processes location signals through a private location manager
instance, analyzing activity and validating data within the private SocialRadar
cloud. It pairs this with other sensor information on the device such as the
compass, accelerometer, and others to more accurately determine the user&rsquo;s
location while minimizing battery drain. Anonymized consumer insights may be
shared with app publishers and marketing firms.</p>

<p>The LocationKit framework works independently of the host app, and other than
the app providing match key data to the framework, no interaction between the
app and framework is required to enable LocationKit to work properly.</p>

<h3 id="operating-requirements">Operating Requirements</h3>

<ul>
<li>Device capable of running iOS 7.x or above (Android coming soon!)</li>
<li>Device capable of properly returning location signals</li>
</ul>

<h3 id="battery-consumption">Battery Consumption</h3>

<p>Battery consumption is extremely efficient â€“ LocationKit averages less than 1.7%
battery consumption per hour under normal usage, depending on the type of device
used and user activity level. Additional details on battery consumption
available in the docs.</p>

<h3 id="transparent-operation">Transparent operation</h3>

<p>LocationKit never surfaces dialog boxes, errors, or notifications directly to a
consumer.</p>

<h1 id="quickstart">Quickstart</h1>

<p>Follow these instructions or watch our Getting Started video:</p>

<iframe class="videoEmbed" width="560" height="315"
src="https://www.youtube.com/embed/Hm23x4krM_c" frameborder="0" allowfullscreen>
</iframe>

<h2 id="1-obtain-an-api-key">1. Obtain an API Key</h2>

<p>The first thing you&rsquo;ll need to do is to
<a href="https://dashboard.locationkit.io">sign up for an account</a> on our
Developer Dashboard. You will create your account and receive your API token.</p>

<p>Within the Developer Dashboard, you will be able to find your API token, and
find insights into the location-based usage of your app with LocationKit.</p>

<h2 id="2-install-the-locationkit-cocoapod">2. Install the LocationKit CocoaPod</h2>

<p>The easiest way to start using LocationKit in your project is by using
<a href="https://cocoapods.org">CocoaPods</a>; add LocationKit to your Podfile with the
code on the right.</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'LocationKit'</span><span class="p">,</span> <span class="s1">'~&gt; 2.0.0'</span>
</code></pre>

<p>Then just run <code class="prettyprint">pod install</code> from your project root.</p>

<h2 id="3-configure-your-project">3. Configure your project</h2>

<p>In your project settings, under <strong>Capabilities</strong>, turn on the
<strong>Background Modes</strong> switch and enable <strong>Location Updates</strong> as shown in the
following screenshot:</p>

<p><img alt="Enable Location Updates" src="images/background_modes.png" /></p>

<h2 id="4-add-2-items-to-your-info-plist-file">4. Add 2 items to your Info.plist file</h2>

<p>Both of these items inform your users of how your app is using Location so
provide a useful description. The users will see this text in a prompt when
your app first starts LocationKit and in the Privacy settings for Location
for your app.</p>

<ol>
<li><code class="prettyprint">NSLocationAlwaysUsageDescription</code></li>
<li><code class="prettyprint">Privacy - Location Usage Description</code></li>
</ol>

<p>See our screenshot below:</p>

<p><img alt="Edit the Info.plist" src="images/info_plist.png" /></p>

<h2 id="5-create-an-objective-c-bridging-header-swift-only">5. Create an Objective-C Bridging Header (Swift-only)</h2>

<p>Since LocationKit is an Objective-C library, you&rsquo;ll need to create an
Objective-C bridging header in order to use it with Swift.</p>

<ol>
<li>Create a new Objective-C file to your project
<img alt="New File" src="images/newfile.png" /></li>
<li>Give it any name you&rsquo;d like. (e.g. &lsquo;Banana&rsquo;) For <em>File Type</em>, leave it at its
default, Empty File and pick a place in your project to save it
<img alt="File Type" src="images/filetype.png" /></li>
<li>When it prompts you to &ldquo;configure an Objective-C bridging header&rdquo; click
<em>Create Bridging Header</em>
<img alt="Bridging Header" src="images/bridgingheader.png" /></li>
<li>You can then delete the file you just created (e.g. &#39;Banana.m&rsquo;) but you&rsquo;ll
notice a new file created called:
<em>{Your Project Name}-Bridging-Header.h</em></li>
<li>Now import LocationKit in the bridging header file:
<code class="prettyprint">#import &lt;LocationKit/LocationKit.h&gt;</code></li>
<li>That&rsquo;s it! You can now use LocationKit in any of your Swift code!</li>
</ol>

<h2 id="6-start-locationkit">6. Start LocationKit</h2>

<p>We recommend starting LocationKit in your AppDelegate, particularly in the
<code class="prettyprint">didFinishLaunchingWithOptions</code> method so it&rsquo;s accessible and running throughout
your app. Start it with the snippet on the right:</p>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startWithApiToken</span><span class="p">:</span><span class="s">@"your_api_token"</span> <span class="nf">andDelegate</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startWithApiToken</span><span class="p">(</span><span class="s">"your_api_token"</span><span class="p">,</span> <span class="nv">andDelegate</span><span class="p">:</span><span class="kc">nil</span><span class="p">)</span>
</code></pre>

<p>Optionally, you can provide a <code class="prettyprint">LocationKitDelegate</code> which will receive a
constant stream of updates as they come in. Here we have supplied <code class="prettyprint">nil</code> so no
delegate will receive the background updates and they will be ignored.</p>

<h1 id="operation">Operation</h1>

<h2 id="start-locationkit">Start LocationKit</h2>

<blockquote>
<p>Start LocationKit with a nil delegate</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startWithApiToken</span><span class="p">:</span><span class="s">@"your_api_token"</span> <span class="nf">andDelegate</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startWithApiToken</span><span class="p">(</span><span class="s">"your_api_token"</span><span class="p">,</span> <span class="nv">andDelegate</span><span class="p">:</span><span class="kc">nil</span><span class="p">)</span>
</code></pre>

<p><em>Use:</em> Kick off LocationKit using the API token you received from the <a href="https://dashboard.locationkit.io">Developer
Dashboard</a></p>

<p><em>Optional:</em> Provide an object implementing our <code class="prettyprint">LocationKitDelegate</code> protocol
to receive background updates when events occur such as getting a new location
or arriving/leaving a place.</p>

<blockquote>
<p>Start LocationKit with an object implementing the LocationKitDelegate protocol</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startWithApiToken</span><span class="p">:</span><span class="s">@"your_api_token"</span> <span class="nf">andDelegate</span><span class="p">:</span><span class="n">myDelegate</span><span class="p">];</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">startWithApiToken</span><span class="p">(</span><span class="s">"your_api_token"</span><span class="p">,</span> <span class="nv">andDelegate</span><span class="p">:</span><span class="n">myDelegate</span><span class="p">)</span>
</code></pre>

<p><em>Notes:</em></p>

<ul>
<li>Due to the use of <a href="https://en.wikipedia.org/wiki/Automatic_Reference_Counting">ARC</a>
in iOS, you must make sure to keep this delegate around. So don&rsquo;t make it a
local variable as it&rsquo;ll get cleaned up by iOS, we suggest adding it as an
instance variable owned by your ViewController or AppDelegate or wherever it
makes sense.</li>
<li>This will require permission from your users to run in the background, which
you will have if you configured things following the instructions above.</li>
</ul>

<h2 id="pause">Pause</h2>

<blockquote>
<p>To pause LocationKit</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">pause</span><span class="p">];</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">pause</span><span class="p">()</span>
</code></pre>

<p><em>Use:</em> Pause LocationKit and stop receiving locations and visits</p>

<p><em>Note:</em> Pausing LocationKit will prevent you from receiving any further updates
to locations, places, visits, and so on so do so sparingly. It will prevent
LocationKit from continuing to run in the background and significantly diminish
the usefulness of our location-based developer insights. We strongly recommend
not pausing LocationKit.</p>

<h2 id="resume">Resume</h2>

<p><em>Use:</em> In order to once again receive updates and get locations or places after you
have paused it, you must resume LocationKit.</p>

<blockquote>
<p>To resume LocationKit after it has been paused</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">resume</span><span class="p">];</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">resume</span><span class="p">()</span>
</code></pre>

<p>If there was some issue resuming LocationKit, the error returned from this
method will be non-<code class="prettyprint">nil</code></p>

<h1 id="high-accuracy-location">High Accuracy Location</h1>

<p>LocationKit provides a higher level of location accuracy than Apple&rsquo;s
CoreLocation.</p>

<p>We are able to do this by utilizing sensors other than the GPS on the device and
pairing it with our venue database and some proprietary algorithms to clean up
the raw GPS points supplied by Apple&rsquo;s Location Manager and exclude outliers.</p>

<p>Getting GPS data directly from Apple is like drinking from a firehose at times
and getting a raw, unfiltered stream of locations and acting on them within your
app can lead to inconsistencies which degrade experience for your users. By
using LocationKit, you can have a greater confidence in the locations for your
app without having to maintain a team of location experts in-house.</p>

<p>As an illustrative example, the GPS will often drift, even when the user is not
moving. It will sometimes give more accurate points and sometimes less accurate
points. LocationKit will monitor and intelligently filter out a lot of the bad
data from this GPS drift. If we notice the accelerometer and compass are unmoved
yet the GPS thinks the device moved 100 feet away, we know it&rsquo;s likely suspect
and will filter that point out, making sure your app doesn&rsquo;t get that crazy
outlier.</p>

<p>As another example, it is very difficult to ascertain the user location,
particularly in an urban environment as the GPS signal tends to be attenuated by
buildings and will often bounce off them as well. Using only the raw GPS feed
you are very likely to end up with a bogus location for your user. LocationKit
will automatically monitor not only the GPS data, but also the compass and
accelerometer so it knows that the user didn&rsquo;t just teleport across the street,
it is likely there is a GPS reflection off the nearby buildings. LocationKit
will know, from the compass data that the user took a left turn into this
building, which we have in our extensive <a href="https://locationkit.io/smart-polygons-shaping-a-more-intelligent-location/">proprietary venue database</a>
so we know which building the user entered even though their GPS chip alone may
point them as across the street due to reflection.</p>

<p>Suffice it to say there is a lot we do too in order to supply a higher
accuracy location.</p>

<p>By using LocationKit in your app, you put all the expertise of our location
experts without having to think about it. Your location data will be more
accurate resulting in a better experience for your users.</p>

<h2 id="single-location-request">Single Location Request</h2>

<blockquote>
<p>To quickly obtain the userâ€™s most recent location coordinates, execute the following:</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">getCurrentLocationWithHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">CLLocation</span> <span class="o">*</span><span class="n">location</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%.6f, %.6f, %@"</span><span class="p">,</span>
            <span class="n">location</span><span class="p">.</span><span class="n">coordinate</span><span class="p">.</span><span class="n">latitude</span><span class="p">,</span>
            <span class="n">location</span><span class="p">.</span><span class="n">coordinate</span><span class="p">.</span><span class="n">longitude</span><span class="p">,</span>
            <span class="n">location</span><span class="p">.</span><span class="n">timestamp</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Error: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="n">getCurrentLocationWithHandler</span> <span class="p">{</span> <span class="p">(</span><span class="nv">location</span><span class="p">:</span><span class="kt">CLLocation</span><span class="o">!</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span><span class="kt">NSError</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">loc</span> <span class="o">=</span> <span class="n">location</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"got location (</span><span class="se">\(</span><span class="n">loc</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">latitude</span><span class="se">)</span><span class="s">, </span><span class="se">\(</span><span class="n">loc</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">longitude</span><span class="se">)</span><span class="s">)"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"got a nil location"</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"error: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><em>Use:</em> Quickly obtain the user&rsquo;s most recent location point. This is a high
accuracy point using LocationKit&rsquo;s proprietary algorithm to refine raw GPS data
and data from other sensors on the device to provide a single, clean point.</p>

<p><em>Returns:</em> A <a href="https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/index.html">CLLocation</a>
object. This is the same object returned from Apple&rsquo;s Location Manager, so if
your code currently uses that, this will return an item in the same format.</p>

<p>It will include the latitude and longitude of the device with a timestamp along
with a measure of the accuracy of that coordinate. It will also include the
device speed, course, and altitude when the GPS signal is good enough to
ascertain those values.</p>

<h2 id="streaming-background-location-updates">Streaming Background Location Updates</h2>

<blockquote>
<p>Implement this method on your LocationKitDelegate</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">locationKit</span><span class="p">:(</span><span class="n">LocationKit</span> <span class="o">*</span><span class="p">)</span><span class="nv">locationKit</span> <span class="nf">didUpdateLocation</span><span class="p">:(</span><span class="n">CLLocation</span> <span class="o">*</span><span class="p">)</span><span class="nv">location</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"The user has moved and their location is now (%.6f, %.6f)"</span><span class="p">,</span>
          <span class="n">location</span><span class="p">.</span><span class="n">coordinate</span><span class="p">.</span><span class="n">latitude</span><span class="p">,</span>
          <span class="n">location</span><span class="p">.</span><span class="n">coordinate</span><span class="p">.</span><span class="n">longitude</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">locationKit</span><span class="p">(</span><span class="nv">locationKit</span><span class="p">:</span> <span class="kt">LocationKit</span><span class="o">!</span><span class="p">,</span> <span class="n">didUpdateLocation</span> <span class="nv">location</span><span class="p">:</span> <span class="kt">CLLocation</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"The user has moved and their location is now (</span><span class="se">\(</span><span class="n">location</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">latitude</span><span class="se">)</span><span class="s">, </span><span class="se">\(</span><span class="n">location</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">longitude</span><span class="se">)</span><span class="s">)"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>In order to receive streaming updates, you must provide an object which conforms
to the <a href="api-reference/#locationkitdelegate">LocationKitDelegate</a> protocol when
launching LocationKit. LocationKit will then call the methods on your delegate
whenever it detects the device has moved to a new location.</p>

<p><em>Use:</em> Receive a stream of background location updates to your
LocationKitDelegate, even while your app is in the background, whenever the
device moves and an accurate location point is determined.</p>

<p><em>Returns:</em> A new CLLocation object, each time the device is moved to a new
location.</p>

<h2 id="optional-timed-background-location-updates">Optional Timed Background Location Updates</h2>

<blockquote>
<p>Start LocationKit with an NSTimeInterval to get timed background updates</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">startWithApiToken</span><span class="p">:</span><span class="s">@"your_api_token"</span> <span class="nf">andDelegate</span><span class="p">:</span><span class="n">myDelegate</span> <span class="nf">withTimeInterval</span><span class="p">:</span><span class="n">myTimeInterval</span><span class="p">];</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">locationKit</span> <span class="o">=</span> <span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>
<span class="n">locationKit</span><span class="o">.</span><span class="nf">startWithApiToken</span><span class="p">(</span><span class="s">"your_api_token"</span><span class="p">,</span> <span class="nv">andDelegate</span><span class="p">:</span><span class="n">myDelegate</span><span class="p">,</span> <span class="nv">andTimeInterval</span><span class="p">:</span><span class="n">myTimeInterval</span><span class="p">)</span>
</code></pre>

<p><em>Use:</em> Start LocationKit in a mode where it provides regularly timed updates,
regardless of user behavior or other environmental considerations. Calls the
same <code class="prettyprint">didUpdateLocation</code> delegate method described above, but now with a set
time interval between points returned.</p>

<p><strong>Note, we urge against using this method in favor of the standard, event-driven
model</strong></p>

<p>We included this method as some partners requested it and to provide parity with
<a href="https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#setInterval(long)">Android&rsquo;s timed location request interval</a>.</p>

<p>However, this method generally results in greater battery drain (particularly if
the specified interval is rather low) and does not guarantee better results.</p>

<p>The GPS chip on an iPhone only provides us with locations every so often and in
the standard usage of LocationKit, we automatically optimize that and provide
updates to your delegate whenever the location of the device changes (and hence
is most relevant for your app).</p>

<p>Requesting to receive such updates on a set time interval rather than relying on
our optimization means:</p>

<ul>
<li>Your code will run more often than it probably needs to resulting in more
complexity and higher battery drain</li>
<li>Depending on the time interval you specify, you may receive stale updates or
the some location multiple times (if the GPS chip provides a location every 10
seconds but you request to have an update every 1 second, 9 out of every 10
updates will be the same and you&rsquo;re just wasting computing and therefore the
user&rsquo;s battery)</li>
<li>You will not get the benefit of other battery optimizations we do such as:

<ul>
<li>Lowering the GPS battery drain intelligently when we notice user pattern
from the accelerometer and GPS which likely indicate that the user is not
moving</li>
<li>Reducing the frequency of updates when the user is performing activity that
is not relevant to determining user location. For instance, when the user
is underground and there is a poor GPS signal we turn down the frequency
as it needlessly wastes their battery. Requesting a timed interval kills
this</li>
</ul></li>
<li>In a situation where the GPS chip is providing frequent updates (such as when
another app is using the GPS for navigation), your app will miss out on
updates it could be getting at no additional battery drain (as the other app
is requesting the frequent GPS updates).</li>
</ul>

<p><a href="locationkit@socialradar.com">Contact us</a> for more details, explanation, or to
talk to one of our location experts about your use case.</p>

<h1 id="contextual-location-data">Contextual Location Data</h1>

<p>While it&rsquo;s great for LocationKit to provide higher accuracy location, that is
only the tip of the iceberg in terms of functionality that LocationKit provides
to help you build awesome apps.</p>

<p>One of the things we discovered while building the SocialRadar consumer app was
that, while a latitude/longitude can be useful, more often what we really cared
about was contextual information about that location.</p>

<p>It&rsquo;s nice to know that a user is currently at (38.904338837, -77.043243408), but
unless you&rsquo;re a computer (or a location geek like myself) you&rsquo;re unlikely to
recognize that as the coordinates of Washington, DC, which is where our offices
are located.</p>

<p>So what we&rsquo;ve done here at SocialRadar is put together an extensive backend
database of venues, buildings, addresses, and events which we use to provide
your app with more comprehensive contextual location information via
LocationKit.</p>

<p>LocationKit is not only monitoring the device for visits, but when it detects a
visit it will automatically call out to our backend servers, fetch all of the
contextual information we have on the place where the visit occurred, and
provide it to your app via a very simple API.</p>

<p>As a developer, you don&rsquo;t have to mess around with getting a latitude/longitude,
reverse geocoding it to figure out the address, then calling multiple other web
APIs to figure out contextual information on that place. LocationKit will handle
all of that complexity for you so your app gets useful location information you
can utilize to build a kick ass experience for your users.</p>

<p>In summary this means that, rather than just getting a latitude/longitude like
you would with CoreLocation, LocationKit will provide your app with context such
as what venue your user is in, the address of that place, any events going on at
that place, and other users of your app that are also at that place. This is
<em>incredibly</em> useful to building an awesome app experience and as a developer you
don&rsquo;t have to do much heavy lifting as we&rsquo;ve done that all for you.</p>

<p>And we&rsquo;ve wrapped it all up in our simple software development kit SDK that you
can drop right into your app.</p>

<h2 id="single-contextual-data-request-with-current-location">Single contextual data request with current location</h2>

<blockquote>
<p>Fetch contextual data on the user&rsquo;s current location</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">getCurrentPlaceWithHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">LKPlace</span> <span class="o">*</span><span class="n">place</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"The user is in %@"</span><span class="p">,</span> <span class="n">place</span><span class="p">.</span><span class="n">address</span><span class="p">.</span><span class="n">locality</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Error fetching place: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">locationKit</span> <span class="o">=</span> <span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>
<span class="n">locationKit</span><span class="o">.</span><span class="n">getCurrentPlaceWithHandler</span> <span class="p">{</span> <span class="p">(</span><span class="nv">place</span><span class="p">:</span><span class="kt">LKPlace</span><span class="o">!</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span><span class="kt">NSError</span><span class="o">!</span><span class="p">)</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">place</span> <span class="o">=</span> <span class="n">place</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"The user is in (</span><span class="se">\(</span><span class="n">place</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">locality</span><span class="se">)</span><span class="s">)"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Error fetching place: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><em>Use:</em> LocationKit will retrieve contextual data on the user&rsquo;s current location.
Similar to reverse geocoding, but with far more contextual info. No other
location API comes close to offering this kind of data in such an easy
and convenient method.</p>

<p><em>Returns:</em> An LKPlace object which includes not only the user&rsquo;s current
address, but also the current venue, events occurring there, other users of your
app currently at that place, and other nearby places.</p>

<h2 id="single-contextual-data-request-with-another-location">Single contextual data request with another location</h2>

<blockquote>
<p>Fetch contextual data on another location</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="n">CLLocation</span> <span class="o">*</span><span class="n">myLocation</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CLLocation</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithLatitude</span><span class="p">:</span><span class="mi">38</span><span class="p">.</span><span class="mi">904338837</span> <span class="nf">longitude</span><span class="p">:</span><span class="o">-</span><span class="mi">77</span><span class="p">.</span><span class="mo">04324340</span><span class="mi">8</span><span class="p">];</span>
<span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">getPlaceForLocation</span><span class="p">:</span><span class="n">myLocation</span> <span class="nf">withHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">LKPlace</span> <span class="o">*</span><span class="n">place</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"The request was in %@"</span><span class="p">,</span> <span class="n">place</span><span class="p">.</span><span class="n">address</span><span class="p">.</span><span class="n">locality</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Error fetching place: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">locationKit</span> <span class="o">=</span> <span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>
<span class="k">var</span> <span class="nv">anotherLocation</span> <span class="o">=</span> <span class="kt">CLLocation</span><span class="p">(</span><span class="nv">latitude</span><span class="p">:</span><span class="mf">38.904338837</span><span class="p">,</span> <span class="nv">longitude</span><span class="p">:</span><span class="o">-</span><span class="mf">77.043243408</span><span class="p">)</span>
<span class="n">locationKit</span><span class="o">.</span><span class="nf">getPlaceForLocation</span><span class="p">(</span><span class="n">anotherLocation</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="nv">place</span><span class="p">:</span><span class="kt">LKPlace</span><span class="o">!</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span><span class="kt">NSError</span><span class="o">!</span><span class="p">)</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">place</span> <span class="o">=</span> <span class="n">place</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"This place is named </span><span class="se">\(</span><span class="n">place</span><span class="o">.</span><span class="n">venue</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><em>Use:</em> Same as above, but supply your own location which may be different from
that of the current device. Great for getting information on a faraway place and
displaying it for your user. This is like reverse geocoding plus.</p>

<p><em>Returns:</em> An LKPlace object representing information about the coordinates you
requested including the address, the venue, events currently occurring there,
and other nearby places.</p>

<h2 id="venue-search">Venue search</h2>

<blockquote>
<p>Search for venues around the current device location</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="n">LKSearchRequest</span> <span class="o">*</span><span class="n">search</span> <span class="o">=</span> <span class="p">[[</span><span class="n">LKSearchRequest</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithLocation</span><span class="p">:</span><span class="n">location</span><span class="p">];</span>
<span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">searchForPlacesWithRequest</span><span class="p">:</span><span class="n">searchRequest</span> <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">places</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// If no places are nearby, tell the user.
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">places</span> <span class="o">==</span> <span class="nb">nil</span> <span class="o">||</span> <span class="p">[</span><span class="n">places</span> <span class="nf">count</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Sorry, no places found nearby."</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">LKPlace</span> <span class="o">*</span><span class="n">place</span> <span class="k">in</span> <span class="n">places</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Name: %@"</span><span class="p">,</span> <span class="n">place</span><span class="p">.</span><span class="n">venue</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">locationKit</span> <span class="o">=</span> <span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">search</span> <span class="o">=</span> <span class="kt">LKSearchRequest</span><span class="p">()</span>
<span class="n">search</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="s">"Mediterranean"</span>
<span class="n">locationKit</span><span class="o">.</span><span class="nf">searchForPlacesWithRequest</span><span class="p">(</span><span class="n">search</span><span class="p">)</span> <span class="p">{(</span><span class="n">places</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span><span class="kt">NSError</span><span class="o">!</span><span class="p">)</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">places</span> <span class="o">=</span> <span class="n">places</span> <span class="p">{</span>
        <span class="k">for</span> <span class="n">places</span> <span class="k">in</span> <span class="n">places</span> <span class="p">{</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">venue</span> <span class="o">=</span> <span class="n">place</span><span class="o">.</span><span class="n">venue</span> <span class="p">{</span>
                <span class="nf">println</span><span class="p">(</span><span class="s">"Name: </span><span class="se">\(</span><span class="n">venue</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Sorry, no places found nearby"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><em>Use:</em> Search for places nearby. LocationKit will automatically contact our
proprietary venue database, default with the device&rsquo;s current location, and
return information on venues which match the current request. In addition to
an arbitrary query, our search can also be limited by a radius or center around
a point other than the device&rsquo;s current location.</p>

<p><em>Returns:</em> An array of LKPlace objects representing places matching your search
request.</p>

<h2 id="people-at-the-same-venue">People at the same venue</h2>

<blockquote>
<p>Retrieve a list of other users of your app at the current venue</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[[</span><span class="n">LocationKit</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">getPeopleAtCurrentVenue</span><span class="p">:(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">people</span><span class="p">,</span> <span class="n">LKVenue</span> <span class="o">*</span><span class="n">venue</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">people</span> <span class="o">==</span> <span class="nb">nil</span> <span class="o">||</span> <span class="p">[</span><span class="n">people</span> <span class="nf">count</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Sorry, no people found at %@ with you"</span><span class="p">,</span> <span class="n">venue</span><span class="p">.</span><span class="n">name</span><span class="p">)</span><span class="err">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"There are %@ people at %@ with you"</span><span class="p">,</span> <span class="p">[</span><span class="n">people</span> <span class="nf">count</span><span class="p">],</span> <span class="n">venue</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">locationKit</span> <span class="o">=</span> <span class="kt">LocationKit</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>
<span class="n">locationKit</span><span class="o">.</span><span class="nf">getPeopleAtCurrentVenue</span><span class="p">()</span> <span class="p">{</span> <span class="p">(</span><span class="n">people</span><span class="p">,</span> <span class="n">venue</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">NSError</span><span class="o">!</span><span class="p">)</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">people</span> <span class="o">=</span> <span class="n">people</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"There are </span><span class="se">\(</span><span class="n">people</span><span class="o">.</span><span class="n">count</span><span class="se">)</span><span class="s"> people at </span><span class="se">\(</span><span class="n">venue</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s"> with you"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Sorry, no people found at </span><span class="se">\(</span><span class="n">venue</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s"> with you"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><em>Use:</em> Fetch other users of your app that are at this same venue. For instance,
if the device making the request is at Starbucks, this will return all other
users at that Starbucks.</p>

<p><em>Returns:</em> An array of people at the event which is an array of LKPersonobjects
and the user&rsquo;s current venue as an LKVenue.</p>

<h1 id="venue-amp-event-detection">Venue &amp; Event Detection</h1>

<h2 id="streaming-contextual-data-request-on-visit-start">Streaming contextual data request on visit start</h2>

<h2 id="streaming-contextual-data-request-on-visit-end">Streaming contextual data request on visit end</h2>

<h1 id="data-model">Data Model</h1>

<h1 id="downloads">Downloads</h1>

<h2 id="cocoapods">CocoaPods</h2>

<p>LocationKit is primarily available for download as a
<a href="https://cocoapods.org/pods/LocationKit">CocoaPod</a></p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'LocationKit'</span><span class="p">,</span> <span class="s1">'~&gt; 2.0.0'</span>
</code></pre>

<h2 id="cordova">Cordova</h2>
<pre class="highlight shell"><code>cordova plugin add cordova-locationkit
</code></pre>

<p>LocationKit is available as a plugin for Apache Cordova.</p>

<h2 id="framework-manual-download">.Framework Manual Download</h2>

<p>LocationKit is not currently generally available as a Framework.</p>

<p>We are regularly releasing with bug fixes and new features and having a manual
version of the .Framework file means you will miss out on a lot of those
enhancements.</p>

<p>Please try to use the CocoaPod if at all possible.</p>

<p>If you really need the Framework, please contact the LocationKit team
directly at <a href="mailto:support@locationkit.io">support@locationkit.io</a>.</p>

            </div>
            <div class="dark-box">
                    <div class="lang-selector">
                                <a href="#" data-language-name="objective_c">Objective-C</a>
                                <a href="#" data-language-name="swift">Swift</a>
                    </div>
            </div>
        </div>
    </div>
  </body>
</html>
